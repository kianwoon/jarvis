# Smart Query Patterns Configuration
# This file defines patterns for the smart query classifier
# Used for fast, high-confidence classification without LLM
#
# IMPORTANT: Tool classification doesn't mean raw tool output!
# When a query is classified as TOOLS:
# 1. Tools are executed to get factual/real-time data
# 2. Results are enhanced by LLM for natural, comprehensive answers
# 3. User gets intelligent responses, not just raw API output
#
# This provides value beyond simple Google search by:
# - Combining multiple tool results intelligently
# - Adding context and explanation
# - Formatting for readability
# - Synthesizing with general knowledge

# Tool-related patterns - for queries that need system tools
tool_patterns:
  datetime:
    patterns:
      - '\b(what|tell me|show me|get).*(today|current|now).*(date|time|datetime)\b'
      - '\b(date|time|datetime).*(today|current|now)\b'
      - '\bwhat.*(date|time) is it\b'
      - '\btoday.*date\b'
      - '\bcurrent.*time\b'
    confidence: 0.95
    
  system_info:
    patterns:
      - '\b(system|computer|machine).*(info|information|details|specs)\b'
      - '\boperating system\b'
      - '\bCPU|memory|disk.*usage\b'
    confidence: 0.9
    
  calculations:
    patterns:
      - '\b(calculate|compute|math)\b.*\d+'
      - '\b\d+\s*[\+\-\*/]\s*\d+\b'
      - '\bconvert.*\b(currency|unit|temperature)\b'
    confidence: 0.9
    
  weather:
    patterns:
      - '\b(weather|temperature|forecast)\b'
      - '\bhow.*weather\b'
      - '\brain.*today|tomorrow\b'
    confidence: 0.9
    
  email_tools:
    patterns:
      - '\b(send|compose|draft).*(email|message|mail|gmail)\b'
      - '\bemail.*to\s+\w+\b'
      - '\b(check|read|find|search|show|list).*(email|inbox|gmail|mail)\b'
      - '\bgmail\b.*\b(search|find|show|list|check|latest|recent|unread)\b'
      - '\b(latest|recent|unread|today).*(email|gmail|mail|message)\b'
    confidence: 0.9
    
  task_management:
    patterns:
      - '\b(create|update|close).*(ticket|issue|jira)\b'
      - '\b(schedule|book|create).*(meeting|appointment|calendar)\b'
      - '\badd.*task|todo\b'
    confidence: 0.9
    
  web_search:
    patterns:
      - '\b(google|search|look up|find).*(online|internet|web)\b'
      - '\b(latest|recent|current|news|update).*(about|on|regarding)\b'
      - '\bsearch.*for.*information\b(?!.*\b(document|file|internal|company)\b)'
      - '\bfind.*\b(latest|recent|current).*\b(information|news|updates)\b'
      # Comparisons that need current information
      - '\b(latest|current|recent).*(comparison|versus|vs|difference)\b'
      - '\bcompare.*\b(latest|current|recent|updated)\b'
    confidence: 0.9
    # NOTE: Web search enhances responses with current information
    # Results are always processed by LLM for comprehensive answers

# LLM patterns - for general conversation and knowledge questions
llm_patterns:
  greetings:
    patterns:
      - '^(hi|hello|hey|good morning|good afternoon|good evening)\b'
      - '^(thanks|thank you|appreciate|grateful)\b'
      - '^(bye|goodbye|see you|farewell)\b'
      - '\bhow are you\b'
    confidence: 0.95
    
  identity:
    patterns:
      - '\bwhat is your name\b'
      - '\bwho are you\b'
      - '\bwhat.*you do\b'
      - '\byour.*capabilities\b'
    confidence: 0.95
    
  general_knowledge:
    patterns:
      - '\b(explain|describe|tell me about)\s+(how|what|why|when|where)\b(?!.*\b(document|file|report|data|information|knowledge)\b)'
      - '\bwhat is a?\s+\w+\b(?!.*\b(document|file|report)\b)'
      - '\bhow does\s+\w+\s+work\b'
      - '\bdefin(e|ition)\s+of\b'
    confidence: 0.9
    
  comparisons:
    patterns:
      - '\b(compare|comparison|difference|versus|vs\.?)\b.*\b(between|of|with)\b(?!.*\b(document|file|report|our|company|internal|latest|recent|current)\b)'
      - '\b(technical|overall|general)\s+(comparison|compare|analysis)\b(?!.*\b(document|file|report|our|company|internal|latest|recent|current)\b)'
      - '\bwhat.*(difference|similar|better|worse)\b.*\bbetween\b(?!.*\b(document|file|report|our|company|internal|latest|recent|current)\b)'
      - '\b(pros and cons|advantages|disadvantages|benefits)\b.*\b(of|between)\b(?!.*\b(document|file|report|our|company|internal|latest|recent|current)\b)'
    confidence: 0.9
    # NOTE: If user asks for "latest" or "current" comparison, it might need google_search tool
    # In that case, the query would match tool_patterns for web search instead
    
  creative:
    patterns:
      - '\b(write|create|generate).*(story|poem|song|script)\b'
      - '\b(joke|funny|humor)\b'
      - '\b(translate|translation)\b'
      - '\bimagine\b.*\bif\b'
    confidence: 0.9
    
  simple_responses:
    patterns:
      - '^(yes|no|okay|ok|sure|alright)\b'
      - '^(i see|got it|understood)\b'
      - '^(great|awesome|perfect|excellent)\b'
    confidence: 0.95

# RAG patterns - for document and knowledge base queries
rag_patterns:
  document_search:
    patterns:
      - '\b(search|find|look for|locate).*(document|file|report|paper|article)\b'
      - '\b(document|file|report|paper|article).*(about|contain|mention|discuss)\b'
      - '\bshow me.*(document|file|report|data)\b'
      - '\bretrieve.*from.*knowledge\b'
    confidence: 0.95
    
  knowledge_queries:
    patterns:
      - '\bwhat.*(document|file|report|information|data|knowledge).*(say|contain|mention)\b'
      - '\b(retrieve|fetch|get).*(information|data|details).*(from|about)\b'
      - '\b(query|search).*(database|knowledge base|collection)\b'
      - '\bfind.*information about\b'
    confidence: 0.9
    
  company_specific:
    patterns:
      - '\b(our|company|internal).*(product|service|strategy|roadmap|plan)\b'
      - '\bwhat.*(policy|procedure|guideline)\b'
      - '\b(latest|recent|updated).*(report|document|information)\b'
      - '\bcompany.*announcement|news\b'
    confidence: 0.95
    
  project_queries:
    patterns:
      - '\bwhat.*(migration|implementation|deployment).*(timeline|schedule|plan)\b'
      - '\bhow long.*(migration|implementation|deployment|project)\b'
      - '\b(benefits|features|advantages).*(our|company).*(product|service)\b'
      - '\bproject.*status|update\b'
    confidence: 0.9

# Multi-agent patterns - for complex tasks
multi_agent_patterns:
  complex_analysis:
    patterns:
      - '\b(analyze|compare|contrast).*(multiple|several|different).*(document|source|report)\b'
      - '\b(complex|complicated).*(analysis|task|problem)\b'
      - '\bcombine.*(information|data).*(from|across).*(source|document)\b'
      - '\bcomprehensive.*analysis\b'
    confidence: 0.9
    
  orchestration:
    patterns:
      - '\b(coordinate|orchestrate).*(multiple|several).*(task|action)\b'
      - '\bstep.by.step.*process\b'
      - '\bmulti.*phase.*project\b'
    confidence: 0.9
    
  large_outputs:
    patterns:
      - '\b(create|generate|write).*(long|detailed|comprehensive).*(report|document|analysis)\b'
      - '\b(full|complete|entire).*(documentation|specification)\b'
      - '\bgenerate.*\d+\s*(pages|paragraphs|sections)\b'
    confidence: 0.9

# Configuration settings
settings:
  # If confidence is below this threshold, fall back to LLM classification
  confidence_threshold: 0.8
  
  # Priority order for pattern matching (first match wins)
  priority_order:
    - tool_patterns
    - rag_patterns
    - multi_agent_patterns
    - llm_patterns
  
  # Default classification if no patterns match
  default_classification: llm
  default_confidence: 0.5